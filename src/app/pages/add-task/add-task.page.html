<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home"></ion-back-button>
    </ion-buttons>
    <ion-title>Nueva Tarea</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen class="ion-padding">
  <ion-grid>
    <ion-row class="ion-justify-content-center">
      <ion-col size="12" size-md="8" size-lg="6">

        <ion-card class="big-card">
          <ion-card-header>
            <ion-card-title>Agregar Tarea</ion-card-title>
            <ion-card-subtitle>Completa los datos</ion-card-subtitle>
          </ion-card-header>

          <ion-card-content>
            <form (ngSubmit)="saveTask()" #taskForm="ngForm">
              <ion-item lines="full">
                <ion-label position="floating">Título de la tarea</ion-label>
                <ion-input name="title" [(ngModel)]="title" required clearInput></ion-input>
              </ion-item>

              <ion-item lines="full" class="select-item">
                <ion-label position="floating">Categoría</ion-label>
                <ion-select name="category" [(ngModel)]="selectedCategoryId" placeholder="Selecciona una categoría"
                  interface="popover" required fill="outline" class="styled-select">
                  <ion-select-option *ngFor="let cat of categories" [value]="cat.id">
                    {{ cat.name }}
                  </ion-select-option>
                </ion-select>
              </ion-item>
            </form>
          </ion-card-content>
        </ion-card>

        <ion-button expand="full" size="large" fill="solid" color="secondary" shape="round"
          class="save-button ion-margin-top" [disabled]="!title.trim() || !selectedCategoryId" (click)="saveTask()">
          <ion-icon slot="start" name="checkmark-outline"></ion-icon>
          {{ isEditing ? 'Guardar cambios' : 'Guardar Tarea' }}
        </ion-button>

      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>